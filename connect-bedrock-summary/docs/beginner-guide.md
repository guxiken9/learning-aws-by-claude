# åˆå­¦è€…å‘ã‘ã‚¬ã‚¤ãƒ‰ï¼šAmazon Connect + Bedrock è¦ç´„ã‚·ã‚¹ãƒ†ãƒ 

ã“ã®ã‚¬ã‚¤ãƒ‰ã§ã¯ã€AWSåˆå­¦è€…ã®æ–¹ã§ã‚‚ç†è§£ã§ãã‚‹ã‚ˆã†ã«ã€ã‚·ã‚¹ãƒ†ãƒ ã®æ¦‚è¦ã‹ã‚‰å®Ÿéš›ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã¾ã§ã‚’åˆ†ã‹ã‚Šã‚„ã™ãèª¬æ˜Žã—ã¾ã™ã€‚

## ðŸ“š ç›®æ¬¡

1. [ã“ã®ã‚·ã‚¹ãƒ†ãƒ ã£ã¦ä½•ï¼Ÿ](#ã“ã®ã‚·ã‚¹ãƒ†ãƒ ã£ã¦ä½•)
2. [ã©ã‚“ãªä»•çµ„ã¿ã§å‹•ãã®ï¼Ÿ](#ã©ã‚“ãªä»•çµ„ã¿ã§å‹•ãã®)
3. [å¿…è¦ãªã‚‚ã®ã¯ï¼Ÿ](#å¿…è¦ãªã‚‚ã®ã¯)
4. [AWSã®åŸºæœ¬çŸ¥è­˜](#awsã®åŸºæœ¬çŸ¥è­˜)
5. [æ‰‹é †ã«æ²¿ã£ã¦è¨­å®šã—ã¦ã¿ã‚ˆã†](#æ‰‹é †ã«æ²¿ã£ã¦è¨­å®šã—ã¦ã¿ã‚ˆã†)
6. [ã‚ˆãã‚ã‚‹è³ªå•ã¨è§£æ±ºæ–¹æ³•](#ã‚ˆãã‚ã‚‹è³ªå•ã¨è§£æ±ºæ–¹æ³•)

## ã“ã®ã‚·ã‚¹ãƒ†ãƒ ã£ã¦ä½•ï¼Ÿ

ã“ã®ã‚·ã‚¹ãƒ†ãƒ ã¯ã€ã‚³ãƒ¼ãƒ«ã‚»ãƒ³ã‚¿ãƒ¼ã®é›»è©±ã‚’ **è‡ªå‹•ã§è¦ç´„ã—ã¦ãã‚Œã‚‹** ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚

### ðŸŽ¯ ã§ãã‚‹ã“ã¨
- é›»è©±ã®å†…å®¹ã‚’è‡ªå‹•ã§æ–‡å­—ã«ã™ã‚‹ï¼ˆæ–‡å­—èµ·ã“ã—ï¼‰
- ãã®æ–‡å­—ã‚’AIãŒèª­ã‚“ã§ã€å¤§äº‹ãªãƒã‚¤ãƒ³ãƒˆã‚’è¦ç´„
- è¦ç´„ã‚’ã‚³ãƒ¼ãƒ«ã‚»ãƒ³ã‚¿ãƒ¼ã®ã‚·ã‚¹ãƒ†ãƒ ã«è‡ªå‹•ã§ä¿å­˜

### ðŸ’¼ ä½¿ãˆã‚‹å ´é¢
- ã‚«ã‚¹ã‚¿ãƒžãƒ¼ã‚µãƒãƒ¼ãƒˆã‚»ãƒ³ã‚¿ãƒ¼
- ãƒ†ãƒ¬ã‚¢ãƒã®è¨˜éŒ²ç®¡ç†
- ç›¸è«‡çª“å£ã®å†…å®¹æ•´ç†
- é€šè©±å“è³ªã®æ”¹å–„

## ã©ã‚“ãªä»•çµ„ã¿ã§å‹•ãã®ï¼Ÿ

ç°¡å˜ã«è¨€ã†ã¨ã€ä»¥ä¸‹ã®æµã‚Œã§å‹•ãã¾ã™ï¼š

```
1. ãŠå®¢æ§˜ã¨ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼ãŒé›»è©±ã§è©±ã™
   â†“
2. Amazon ConnectãŒé€šè©±ã‚’éŒ²éŸ³ãƒ»æ–‡å­—èµ·ã“ã—
   â†“
3. æ–‡å­—èµ·ã“ã—ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã‚’S3ï¼ˆã‚¯ãƒ©ã‚¦ãƒ‰ã®ä¿ç®¡åº«ï¼‰ã«ä¿å­˜
   â†“
4. Lambdaï¼ˆå°ã•ãªãƒ—ãƒ­ã‚°ãƒ©ãƒ ï¼‰ãŒå‹•ã„ã¦ã€Bedrockã®AIã«ã€Œè¦ç´„ã—ã¦ã€ã¨ãŠé¡˜ã„
   â†“
5. AIãŒè¦ç´„ã‚’ä½œæˆ
   â†“
6. è¦ç´„ã‚’Connectã®ã‚·ã‚¹ãƒ†ãƒ ã«è‡ªå‹•ã§ç™»éŒ²
```

### ðŸ” ä½¿ã‚ã‚Œã‚‹AWSã‚µãƒ¼ãƒ“ã‚¹

| ã‚µãƒ¼ãƒ“ã‚¹å | å½¹å‰² | ä¾‹ãˆã§èª¬æ˜Ž |
|------------|------|------------|
| **Amazon Connect** | é›»è©±ã‚·ã‚¹ãƒ†ãƒ  | ã‚³ãƒ¼ãƒ«ã‚»ãƒ³ã‚¿ãƒ¼ã®é›»è©±æ©Ÿ |
| **Contact Lens** | æ–‡å­—èµ·ã“ã— | é€šè©±ã‚’èžã„ã¦æ–‡å­—ã«ã™ã‚‹ç§˜æ›¸ |
| **S3** | ãƒ•ã‚¡ã‚¤ãƒ«ä¿ç®¡ | ã‚¯ãƒ©ã‚¦ãƒ‰ä¸Šã®å€‰åº« |
| **Lambda** | ãƒ—ãƒ­ã‚°ãƒ©ãƒ å®Ÿè¡Œ | æ±ºã¾ã£ãŸä½œæ¥­ã‚’ã™ã‚‹è‡ªå‹•ãƒ­ãƒœãƒƒãƒˆ |
| **Bedrock** | AIè¦ç´„ | æ–‡ç« ã‚’èª­ã‚“ã§è¦ç´„ã—ã¦ãã‚Œã‚‹AIåŠ©æ‰‹ |

## å¿…è¦ãªã‚‚ã®ã¯ï¼Ÿ

### ðŸ’» ãƒ‘ã‚½ã‚³ãƒ³ç’°å¢ƒ
- **Node.js 18ä»¥ä¸Š** - ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å‹•ã‹ã™ãŸã‚ã®ã‚½ãƒ•ãƒˆ
- **Git** - ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ãƒ„ãƒ¼ãƒ«
- **ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒ‡ã‚£ã‚¿** - Visual Studio Codeãªã©

### â˜ï¸ AWSã‚¢ã‚«ã‚¦ãƒ³ãƒˆ
- **AWSã‚¢ã‚«ã‚¦ãƒ³ãƒˆ** - Amazonã®ã‚¯ãƒ©ã‚¦ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã‚’ä½¿ã†ãŸã‚ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ
- **é©åˆ‡ãªæ¨©é™** - å„ç¨®ã‚µãƒ¼ãƒ“ã‚¹ã‚’æ“ä½œã§ãã‚‹æ¨©é™
- **ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰** - AWSåˆ©ç”¨æ–™é‡‘ã®æ”¯æ‰•ã„ç”¨ï¼ˆç„¡æ–™æž ã‚ã‚Šï¼‰

### ðŸ“ž Amazon Connect
- **Connectã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹** - é›»è©±ã‚·ã‚¹ãƒ†ãƒ ã®æœ¬ä½“
- **é›»è©±ç•ªå·** - ãŠå®¢æ§˜ãŒã‹ã‘ã‚‹é›»è©±ç•ªå·

## AWSã®åŸºæœ¬çŸ¥è­˜

### ðŸ—ï¸ AWS CDKã¨ã¯ï¼Ÿ
**CDKï¼ˆCloud Development Kitï¼‰** ã¯ã€AWSã®ã‚¤ãƒ³ãƒ•ãƒ©ã‚’ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚³ãƒ¼ãƒ‰ã§ç®¡ç†ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚

**å¾“æ¥ã®æ–¹æ³•ï¼š**
```
AWSã‚³ãƒ³ã‚½ãƒ¼ãƒ«ç”»é¢ã§æ‰‹ä½œæ¥­ã§ãƒãƒãƒãƒè¨­å®š
â†“
æ™‚é–“ãŒã‹ã‹ã‚‹ã€ãƒŸã‚¹ã—ã‚„ã™ã„ã€å†ç¾æ€§ãŒãªã„
```

**CDKã‚’ä½¿ã£ãŸæ–¹æ³•ï¼š**
```
ã‚³ãƒ¼ãƒ‰ã§ã‚¤ãƒ³ãƒ•ãƒ©ã‚’å®šç¾©
â†“
è‡ªå‹•ã§AWSãƒªã‚½ãƒ¼ã‚¹ã‚’ä½œæˆãƒ»è¨­å®š
â†“
é–“é•ã„ãŒå°‘ãªã„ã€å†åˆ©ç”¨ã§ãã‚‹ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†å¯èƒ½
```

### ðŸ’° æ–™é‡‘ã®ç›®å®‰

| ã‚µãƒ¼ãƒ“ã‚¹ | æ–™é‡‘ã®ä»•çµ„ã¿ | æœˆé¡ç›®å®‰ï¼ˆ100ä»¶å‡¦ç†ï¼‰ |
|----------|-------------|---------------------|
| Amazon Connect | ä½¿ã£ãŸåˆ†ã ã‘ | ç´„500å†† |
| Contact Lens | åˆ†æžã—ãŸé€šè©±åˆ†æ•° | ç´„300å†† |
| S3 | ä¿å­˜å®¹é‡ | ç´„50å†† |
| Lambda | å®Ÿè¡Œå›žæ•°ãƒ»æ™‚é–“ | ç´„10å†† |
| Bedrock | ãƒˆãƒ¼ã‚¯ãƒ³æ•° | ç´„200å†† |
| **åˆè¨ˆ** | - | **ç´„1,060å††** |

â€»å®Ÿéš›ã®æ–™é‡‘ã¯ä½¿ç”¨é‡ã«ã‚ˆã‚Šå¤‰å‹•ã—ã¾ã™

## æ‰‹é †ã«æ²¿ã£ã¦è¨­å®šã—ã¦ã¿ã‚ˆã†

### ã‚¹ãƒ†ãƒƒãƒ—1ï¼šç’°å¢ƒã®æº–å‚™

#### 1-1. Node.jsã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
```bash
# Node.jsã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèª
node --version
# v18.0.0ä»¥ä¸ŠãŒè¡¨ç¤ºã•ã‚Œã‚Œã°OK

# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ãªã„å ´åˆ
# https://nodejs.org/ ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
```

#### 1-2. AWS CLIã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
```bash
# AWS CLIã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç¢ºèª
aws --version
# aws-cli/2.x.x ã¨è¡¨ç¤ºã•ã‚Œã‚Œã°OK

# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ãªã„å ´åˆ
# https://aws.amazon.com/cli/ ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
```

#### 1-3. AWSèªè¨¼æƒ…å ±ã®è¨­å®š
```bash
aws configure
# AWS Access Key ID: ï¼ˆã‚ãªãŸã®ã‚¢ã‚¯ã‚»ã‚¹ã‚­ãƒ¼ï¼‰
# AWS Secret Access Key: ï¼ˆã‚ãªãŸã®ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚­ãƒ¼ï¼‰
# Default region name: ap-northeast-1  â† æ±äº¬ãƒªãƒ¼ã‚¸ãƒ§ãƒ³
# Default output format: json
```

### ã‚¹ãƒ†ãƒƒãƒ—2ï¼šãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰

```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
git clone https://github.com/your-username/learning-aws.git
cd learning-aws/connect-bedrock-summary

# ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install
```

### ã‚¹ãƒ†ãƒƒãƒ—3ï¼šç’°å¢ƒå¤‰æ•°ã®è¨­å®š

```bash
# è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ”ãƒ¼
cp .env.example .env

# .envãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†
nano .env
```

`.env`ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸­èº«ï¼š
```bash
# ã“ã“ã‚’å®Ÿéš›ã®Connectã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹IDã«å¤‰æ›´
CONNECT_INSTANCE_ID=12345678-1234-1234-1234-123456789012

# ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ï¼ˆæ±äº¬ã®å ´åˆï¼‰
AWS_REGION=ap-northeast-1

# ä½¿ç”¨ã™ã‚‹AIãƒ¢ãƒ‡ãƒ«ï¼ˆãã®ã¾ã¾ã§OKï¼‰
BEDROCK_MODEL_ID=anthropic.claude-3-sonnet-20240229-v1:0
```

### ã‚¹ãƒ†ãƒƒãƒ—4ï¼šãƒ‡ãƒ—ãƒ­ã‚¤

#### 4-1. CDKã®åˆæœŸè¨­å®šï¼ˆåˆå›žã®ã¿ï¼‰
```bash
# CDKã‚’ãƒ–ãƒ¼ãƒˆã‚¹ãƒˆãƒ©ãƒƒãƒ—
npx cdk bootstrap

# æˆåŠŸã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã¾ã™
# âœ…  Environment aws://123456789012/ap-northeast-1 bootstrapped.
```

#### 4-2. ãƒ‡ãƒ—ãƒ­ã‚¤ã®å®Ÿè¡Œ
```bash
# ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®š
export CONNECT_INSTANCE_ID="ã‚ãªãŸã®Connectã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ID"

# ä½•ãŒä½œã‚‰ã‚Œã‚‹ã‹ç¢ºèª
npx cdk diff

# å®Ÿéš›ã«ãƒ‡ãƒ—ãƒ­ã‚¤
npx cdk deploy

# ç¢ºèªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§ã€Œyã€ã‚’å…¥åŠ›
```

#### 4-3. ãƒ‡ãƒ—ãƒ­ã‚¤å®Œäº†ã®ç¢ºèª
æˆåŠŸã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ãªå‡ºåŠ›ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ï¼š
```
âœ…  ConnectBedrockSummaryStack

Outputs:
ConnectBedrockSummaryStack.TranscriptionBucketName = connect-transcriptions-123456789012-ap-northeast-1
ConnectBedrockSummaryStack.SummaryBucketName = connect-summaries-123456789012-ap-northeast-1
ConnectBedrockSummaryStack.ErrorNotificationTopicArn = arn:aws:sns:ap-northeast-1:123456789012:...
```

### ã‚¹ãƒ†ãƒƒãƒ—5ï¼šAmazon Connectã®è¨­å®š

#### 5-1. Connectã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«ã‚¢ã‚¯ã‚»ã‚¹
1. [Amazon Connectã‚³ãƒ³ã‚½ãƒ¼ãƒ«](https://console.aws.amazon.com/connect/) ã‚’é–‹ã
2. ä½œæˆæ¸ˆã¿ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’é¸æŠž

#### 5-2. Contact Lensã®æœ‰åŠ¹åŒ–
1. å·¦ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ã€Œãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã€â†’ã€Œè¨˜éŒ²ã¨ã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹ã€ã‚’é¸æŠž
2. ã€ŒContact Lensã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã€Œç·¨é›†ã€ã‚’ã‚¯ãƒªãƒƒã‚¯
3. ã€Œãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åˆ†æžã‚’æœ‰åŠ¹ã«ã™ã‚‹ã€ã‚’ã‚ªãƒ³
4. ã€ŒCall recording analysisã€ã‚’ã‚ªãƒ³
5. ã€ŒS3ãƒã‚±ãƒƒãƒˆã€ã«ã€ãƒ‡ãƒ—ãƒ­ã‚¤æ™‚ã«å‡ºåŠ›ã•ã‚ŒãŸ`TranscriptionBucketName`ã‚’è¨­å®š

#### 5-3. é€šè©±è¨˜éŒ²ã®è¨­å®š
1. ã€Œé€šè©±è¨˜éŒ²ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã€Œç·¨é›†ã€ã‚’ã‚¯ãƒªãƒƒã‚¯
2. ã€Œé€šè©±è¨˜éŒ²ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã€ã‚’ã‚ªãƒ³
3. ä¸Šè¨˜ã¨åŒã˜S3ãƒã‚±ãƒƒãƒˆã‚’è¨­å®š

### ã‚¹ãƒ†ãƒƒãƒ—6ï¼šãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

#### 6-1. ãƒ†ã‚¹ãƒˆç”¨ãƒ‡ãƒ¼ã‚¿ã®ä½œæˆ
```bash
# ãƒ†ã‚¹ãƒˆç”¨ã®æ–‡å­—èµ·ã“ã—ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ
cat > test-transcription.json << 'EOF'
{
  "contactId": "test-contact-123",
  "segments": [
    {
      "speaker": "Agent",
      "content": "ãŠé›»è©±ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚æœ¬æ—¥ã¯ã©ã®ã‚ˆã†ãªã”ç”¨ä»¶ã§ã—ã‚‡ã†ã‹ï¼Ÿ",
      "timestamp": "2024-01-01T10:00:00Z"
    },
    {
      "speaker": "Customer",
      "content": "å…ˆæ—¥æ³¨æ–‡ã—ãŸå•†å“ãŒã¾ã å±Šã„ã¦ã„ãªã„ã®ã§ã™ãŒã€é…é€çŠ¶æ³ã‚’ç¢ºèªã—ã¦ã„ãŸã ã‘ã¾ã™ã‹ï¼Ÿ",
      "timestamp": "2024-01-01T10:00:05Z"
    },
    {
      "speaker": "Agent",
      "content": "ç”³ã—è¨³ã”ã–ã„ã¾ã›ã‚“ã€‚æ³¨æ–‡ç•ªå·ã‚’æ•™ãˆã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ï¼Ÿ",
      "timestamp": "2024-01-01T10:00:15Z"
    },
    {
      "speaker": "Customer",
      "content": "æ³¨æ–‡ç•ªå·ã¯ ABC-12345 ã§ã™ã€‚",
      "timestamp": "2024-01-01T10:00:20Z"
    },
    {
      "speaker": "Agent",
      "content": "ç¢ºèªã„ãŸã—ã¾ã™ã€‚å°‘ã€…ãŠå¾…ã¡ãã ã•ã„ã€‚ç¢ºèªã§ãã¾ã—ãŸã€‚å•†å“ã¯æ˜Žæ—¥ã®åˆå‰ä¸­ã«ãŠå±Šã‘äºˆå®šã¨ãªã£ã¦ãŠã‚Šã¾ã™ã€‚",
      "timestamp": "2024-01-01T10:00:40Z"
    },
    {
      "speaker": "Customer",
      "content": "åˆ†ã‹ã‚Šã¾ã—ãŸã€‚ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚",
      "timestamp": "2024-01-01T10:01:00Z"
    }
  ],
  "metadata": {
    "startTime": "2024-01-01T10:00:00Z",
    "endTime": "2024-01-01T10:01:10Z",
    "duration": 70
  }
}
EOF
```

#### 6-2. ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
```bash
# S3ã«ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
aws s3 cp test-transcription.json s3://connect-transcriptions-ã‚ãªãŸã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆID-ap-northeast-1/transcriptions/test-contact-123.json
```

#### 6-3. å‡¦ç†çµæžœã®ç¢ºèª
```bash
# Lambdaé–¢æ•°ã®ãƒ­ã‚°ã‚’ç¢ºèª
aws logs tail /aws/lambda/ConnectBedrockSummaryStack-SummarizerFunction --follow

# è¦ç´„ãƒ•ã‚¡ã‚¤ãƒ«ã®ç¢ºèª
aws s3 ls s3://connect-summaries-ã‚ãªãŸã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆID-ap-northeast-1/summaries/

# è¦ç´„å†…å®¹ã®è¡¨ç¤º
aws s3 cp s3://connect-summaries-ã‚ãªãŸã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆID-ap-northeast-1/summaries/test-contact-123-summary.json - | jq '.summary'
```

æœŸå¾…ã•ã‚Œã‚‹è¦ç´„ä¾‹ï¼š
```
ã€é€šè©±ã®ç›®çš„ã€‘
é…é€é…å»¶ã«é–¢ã™ã‚‹å•ã„åˆã‚ã›ã¨çŠ¶æ³ç¢ºèª

ã€é‡è¦ãªãƒã‚¤ãƒ³ãƒˆã€‘
â€¢ é¡§å®¢ã‹ã‚‰æ³¨æ–‡å•†å“ã®æœªç€ã«ã¤ã„ã¦é€£çµ¡
â€¢ æ³¨æ–‡ç•ªå·ï¼šABC-12345
â€¢ é…é€äºˆå®šï¼šæ˜Žæ—¥åˆå‰ä¸­

ã€å•é¡Œã®çŠ¶æ³ã€‘
è§£æ±ºæ¸ˆã¿ - é…é€çŠ¶æ³ã‚’ç¢ºèªã—ã€äºˆå®šã‚’æ¡ˆå†…

ã€ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¢ã‚¤ãƒ†ãƒ ã€‘
â€¢ æ˜Žæ—¥åˆå‰ä¸­ã®é…é€ç¢ºèª
â€¢ é…é€å®Œäº†å¾Œã®ãƒ•ã‚©ãƒ­ãƒ¼ã‚¢ãƒƒãƒ—

ã€é¡§å®¢æ„Ÿæƒ…ã€‘
ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ©ãƒ«ï¼ˆå•é¡Œè§£æ±ºã«ã‚ˆã‚Šæº€è¶³ï¼‰
```

## ã‚ˆãã‚ã‚‹è³ªå•ã¨è§£æ±ºæ–¹æ³•

### ðŸ¤” Q1: ãƒ‡ãƒ—ãƒ­ã‚¤ã§ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¾ã™
**A1: ã‚ˆãã‚ã‚‹åŽŸå› ã¨è§£æ±ºæ–¹æ³•**

```bash
# ã‚¨ãƒ©ãƒ¼1: æ¨©é™ä¸è¶³
Error: User is not authorized to perform: iam:CreateRole

â†’ è§£æ±ºæ–¹æ³•: IAMæ¨©é™ã‚’ç¢ºèª
aws iam get-user
# AdministratorAccess ã¾ãŸã¯é©åˆ‡ãªæ¨©é™ãŒã‚ã‚‹ã‹ç¢ºèª

# ã‚¨ãƒ©ãƒ¼2: ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼
Error: Region ap-northeast-1 is not supported

â†’ è§£æ±ºæ–¹æ³•: BedrockãŒåˆ©ç”¨å¯èƒ½ãªãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã«å¤‰æ›´
# .envãƒ•ã‚¡ã‚¤ãƒ«ã§AWS_REGION=us-east-1 ã«å¤‰æ›´
```

### ðŸ¤” Q2: Lambdaé–¢æ•°ãŒã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã—ã¾ã™
**A2: ãƒ¡ãƒ¢ãƒªãƒ»ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆè¨­å®šã®èª¿æ•´**

CDKã‚¹ã‚¿ãƒƒã‚¯ãƒ•ã‚¡ã‚¤ãƒ«ã§ä»¥ä¸‹ã‚’å¤‰æ›´ï¼š
```typescript
// lib/connect-bedrock-summary-stack.ts
const summarizerFunction = new NodejsFunction(this, 'SummarizerFunction', {
  // ãƒ¡ãƒ¢ãƒªã‚’å¢—ã‚„ã™
  memorySize: 2048,  // 1024 â†’ 2048
  // ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã‚’å»¶é•·
  timeout: cdk.Duration.minutes(10),  // 5åˆ† â†’ 10åˆ†
});
```

### ðŸ¤” Q3: Bedrock APIã§ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¾ã™
**A3: ãƒ¢ãƒ‡ãƒ«ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ã®ç¢ºèª**

1. [Bedrockã‚³ãƒ³ã‚½ãƒ¼ãƒ«](https://console.aws.amazon.com/bedrock/) ã‚’é–‹ã
2. å·¦ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ã€ŒModel accessã€ã‚’é¸æŠž
3. ã€ŒAnthropic Claude 3 Sonnetã€ãŒã€ŒAccess grantedã€ã«ãªã£ã¦ã„ã‚‹ã‹ç¢ºèª
4. ãªã£ã¦ã„ãªã„å ´åˆã¯ã€ŒManage model accessã€ã‹ã‚‰æœ‰åŠ¹åŒ–

### ðŸ¤” Q4: æ–™é‡‘ãŒå¿ƒé…ã§ã™
**A4: ã‚³ã‚¹ãƒˆç®¡ç†ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹**

```bash
# 1. äºˆç®—ã‚¢ãƒ©ãƒ¼ãƒˆã®è¨­å®š
aws budgets create-budget --account-id 123456789012 --budget file://budget.json

# 2. ä¸è¦æ™‚ã®ãƒªã‚½ãƒ¼ã‚¹å‰Šé™¤
npx cdk destroy

# 3. S3ã®å¤ã„ãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤ï¼ˆè‡ªå‹•è¨­å®šæ¸ˆã¿ï¼‰
# - æ–‡å­—èµ·ã“ã—ãƒ‡ãƒ¼ã‚¿: 90æ—¥å¾Œã«å‰Šé™¤
# - è¦ç´„ãƒ‡ãƒ¼ã‚¿: 365æ—¥å¾Œã«å‰Šé™¤
```

### ðŸ¤” Q5: ãƒ­ã‚°ã‚’ç¢ºèªã—ãŸã„ã§ã™
**A5: å„ç¨®ãƒ­ã‚°ã®ç¢ºèªæ–¹æ³•**

```bash
# Lambdaé–¢æ•°ã®ãƒ­ã‚°
aws logs describe-log-groups --log-group-name-prefix "/aws/lambda/ConnectBedrockSummaryStack"

# ç‰¹å®šã®é–¢æ•°ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ­ã‚°
aws logs tail /aws/lambda/ConnectBedrockSummaryStack-SummarizerFunction --follow

# ã‚¨ãƒ©ãƒ¼ã®ã¿è¡¨ç¤º
aws logs filter-log-events \
  --log-group-name /aws/lambda/ConnectBedrockSummaryStack-SummarizerFunction \
  --filter-pattern "ERROR"

# CloudWatchã§ã®ã‚°ãƒ©ãƒ•ã‚£ã‚«ãƒ«è¡¨ç¤º
# https://console.aws.amazon.com/cloudwatch/
```

### ðŸ¤” Q6: æœ¬ç•ªç’°å¢ƒã§ä½¿ã†å‰ã®æ³¨æ„ç‚¹
**A6: æœ¬ç•ªåˆ©ç”¨ã®ãŸã‚ã®ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ**

```markdown
â–¡ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®šã®ç¢ºèª
  - IAMãƒ­ãƒ¼ãƒ«ãŒæœ€å°æ¨©é™ã«ãªã£ã¦ã„ã‚‹ã‹
  - S3ãƒã‚±ãƒƒãƒˆãŒãƒ‘ãƒ–ãƒªãƒƒã‚¯ã‚¢ã‚¯ã‚»ã‚¹ä¸å¯ã«ãªã£ã¦ã„ã‚‹ã‹
  - æš—å·åŒ–ãŒæœ‰åŠ¹ã«ãªã£ã¦ã„ã‚‹ã‹

â–¡ ç›£è¦–ãƒ»ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®š
  - CloudWatchã‚¢ãƒ©ãƒ¼ãƒ ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹
  - SNSé€šçŸ¥å…ˆãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹
  - ãƒ­ã‚°ä¿æŒæœŸé–“ãŒé©åˆ‡ã‹

â–¡ ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ»å¾©æ—§æ‰‹é †
  - S3ãƒã‚±ãƒƒãƒˆã®ãƒãƒ¼ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°ãŒæœ‰åŠ¹ã‹
  - ç½å®³å¾©æ—§æ‰‹é †ãŒæ–‡æ›¸åŒ–ã•ã‚Œã¦ã„ã‚‹ã‹

â–¡ æ€§èƒ½ãƒ»å®¹é‡è¨ˆç”»
  - æƒ³å®šé€šè©±æ•°ã§ã®ãƒ†ã‚¹ãƒˆãŒå®Œäº†ã—ã¦ã„ã‚‹ã‹
  - Lambdaé–¢æ•°ã®ãƒ¡ãƒ¢ãƒªãƒ»ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆãŒé©åˆ‡ã‹
  - ã‚³ã‚¹ãƒˆè¦‹ç©ã‚‚ã‚ŠãŒå®Œäº†ã—ã¦ã„ã‚‹ã‹
```

## ðŸŽ‰ ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼

ã“ã‚Œã§Amazon Connect + Bedrockè¦ç´„ã‚·ã‚¹ãƒ†ãƒ ã®æ§‹ç¯‰ãŒå®Œäº†ã—ã¾ã—ãŸã€‚

**æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ï¼š**
1. å®Ÿéš›ã®é€šè©±ã§ãƒ†ã‚¹ãƒˆã—ã¦ã¿ã‚‹
2. è¦ç´„ã®å“è³ªã‚’ç¢ºèªãƒ»èª¿æ•´
3. æœ¬ç•ªé‹ç”¨ã«å‘ã‘ãŸç›£è¦–è¨­å®š
4. ãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼ã¸ã®ä½¿ã„æ–¹èª¬æ˜Ž

**å›°ã£ãŸã¨ãã¯ï¼š**
- å„ç¨®ãƒ­ã‚°ã‚’ç¢ºèª
- AWSã‚µãƒãƒ¼ãƒˆã«å•ã„åˆã‚ã›
- é–‹ç™ºè€…ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã§ç›¸è«‡

ã‚·ã‚¹ãƒ†ãƒ ã®æ”¹å–„ã‚„æ©Ÿèƒ½è¿½åŠ ã®ã‚¢ã‚¤ãƒ‡ã‚¢ãŒã‚ã‚Œã°ã€ãœã²å®Ÿè£…ã«ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã—ã¦ã¿ã¦ãã ã•ã„ï¼